(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[936],{7634:(e,t,s)=>{"use strict";s.a(e,async(e,n)=>{try{s.d(t,{C:()=>m});var i=s(80263),a=s(2853),r=s(68501),c=s(53239),l=s(80797),o=s(89806),d=s(11773),u=s(67902),h=e([l,o,d,u]);function m(){let e=(0,r.useRouter)().query;return(0,c.useEffect)(()=>{e&&0!==Object.keys(e).length&&u.R.getState().syncFromURL(e)},[e]),(0,i.jsxs)("div",{className:"bg-theme-surface-card flex flex-wrap justify-end gap-1 rounded-xl p-2",children:[(0,i.jsx)(l.W,{}),(0,i.jsx)(o.n,{}),(0,i.jsx)(o.D,{}),(0,i.jsx)(d.g,{}),(0,i.jsx)(a.$,{onClick:()=>u.R.getState().reset(),intent:"muted",children:"Clear"})]})}[l,o,d,u]=h.then?(await h)():h,n()}catch(e){n(e)}})},11773:(e,t,s)=>{"use strict";s.a(e,async(e,n)=>{try{s.d(t,{g:()=>o});var i=s(80263),a=s(65299),r=s(93567),c=s(67902),l=e([c]);c=(l.then?(await l)():l)[0];let d=["asc","desc"].map(e=>({component:(0,i.jsx)("div",{children:"asc"===e?"Asc":"Desc"}),id:e}));function o(){let e=(0,c.R)((0,r.k)(e=>e.sortOrderByDiscount));return(0,i.jsx)(a.O,{onValueChange:e=>{c.R.setState({sortOrderByDiscount:null==e?void 0:e.toLowerCase()}),c.R.getState().syncToURL()},value:e,items:d})}n()}catch(e){n(e)}})},15980:(e,t,s)=>{"use strict";s.a(e,async(e,n)=>{try{s.r(t),s.d(t,{default:()=>h});var i=s(80263),a=s(11515),r=s(1469),c=s(63),l=s(53239),o=s(67290),d=s(70730),u=e([o]);function h(){let[e,t]=(0,l.useState)(!1);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.bV,{title:"Available Invoices"}),(0,i.jsxs)("div",{className:"mx-auto max-w-7xl px-4",children:[(0,i.jsxs)("div",{className:"mb-4 flex items-center gap-2",children:[e?(0,i.jsx)(a.a,{fill:"currentColor",className:"h-5 w-5"}):(0,i.jsx)(d.K,{className:"h-5 w-5"}),(0,i.jsx)(r.E,{variant:"title-4m",children:"Available Invoices"})]}),(0,i.jsx)(o.t,{setIsFetching:t})]})]})}o=(u.then?(await u)():u)[0],n()}catch(e){n(e)}})},18034:(e,t,s)=>{"use strict";s.d(t,{n:()=>n});let n=[{inputs:[{internalType:"address",name:"bridge",type:"address"}],name:"burningCurrentLimitOf",outputs:[{internalType:"uint256",name:"limit",type:"uint256"}],stateMutability:"view",type:"function"}]},18043:(e,t,s)=>{"use strict";s.a(e,async(e,n)=>{try{s.d(t,{H:()=>U});var i=s(80263),a=s(2853),r=s(3122),c=s(66975),l=s(1469),o=s(11895),d=s(79913),u=s(43605),h=s(11515),m=s(97187),x=s(32183),v=s(82815),f=s(9188),p=s(93842),j=s(29870),g=s(15188),b=s(54703),y=s(44147),w=s(79617),N=s(33736),I=s(27700),_=s(16492),k=s(70831),S=s(53239),C=s(38326),T=s(88928),E=s(59456),A=s(52095),D=s(5503),R=s(35460),O=s(48114),P=s(5657),H=s(12705),B=s(64245),L=s(97116),F=s(39006),G=e([o,d,x,v,f,b,R,B,L]);function M(e,t,s){var n;let i="".concat(t.ticker_hash,"-").concat(s);return(null===(n=e[i])||void 0===n?void 0:n.purchasableInvoiceId)!==t.intent_id}function U(e){let{invoice:t,purchasableInvoices:s}=e,[n,c]=(0,S.useState)(!1),[l,d]=(0,S.useState)("preview"),u=(0,o.Iu)({tickerHash:t.ticker_hash});if(!u)throw Error("Asset not found");let{data:h}=(0,F.B)(t.intent_id),m=u.contracts.map(e=>e.chain_id).filter(e=>e!==f.Xf.chain_id),{data:x,error:v}=(0,L.P)(t.ticker_hash,m),p=t.destinations.every(e=>M(s,t,Number(e)));return v&&console.log(v),(0,i.jsxs)(r.bL,{onOpenChange:e=>{c(e),!1===e&&d("preview")},open:n,children:[(0,i.jsx)(r.l9,{asChild:!0,disabled:p,children:(0,i.jsx)(a.$,{size:"sm",intent:"secondary",children:"Purchase"})}),(0,i.jsx)(r.UC,{wrapperClassName:"p-0",title:"preview"===l?"Purchase Invoice":"selectOrigin"===l?"Select Origin & Purchase Amount":"selectDestination"===l?"Select Destinations":"Purchase Invoice",children:(0,i.jsx)(q,{invoice:t,asset:u,view:l,setView:d,purchasableInvoices:s,custodiedAmounts:x,minAmounts:h})})]})}function q(e){var t;let{invoice:s,asset:n,minAmounts:r,view:c,setView:u,custodiedAmounts:m,purchasableInvoices:f}=e,p=(0,k.sf)(),[w,N]=(0,S.useState)(),[I,_]=(0,S.useState)(),[T,L]=(0,S.useState)(!1),[F,G]=(0,S.useState)(""),{address:U}=(0,D.F)(),{refetchBalances:q}=(0,b.x)();(0,S.useEffect)(()=>{if((null==r?void 0:r.minAmounts)&&!w&&1===Object.keys(r.minAmounts).length){let e=Number(Object.keys(r.minAmounts)[0]);M(f,s,e)||N(e)}},[r,w,s,f]);let $=BigInt((null==r?void 0:null===(t=r.minAmounts)||void 0===t?void 0:t[w||"-1"])||0n),Y=(0,y.n)({mutationFn:()=>{if(!r||!w||!I||!r.minAmounts[w]||!U)throw Error("Min amount not loaded");if($<=0n)throw Error("Intent amount is less than or equal to 0");let e=(0,o.cd)({tickerHash:s.ticker_hash,chainId:w});if(!e)throw Error("No asset found");if(T?!F:!U)throw Error("No to address found");return p.capture(H.Y.PurchaseInvoices.Started),(0,R.F)({toAddress:T&&F?F:U,amount:(0,E.X)((0,A.J)($,18),e.contract.decimals),asset:e,callData:"0x0",destinations:I,origin:w})},onSuccess:e=>{u("confirmation"),g.S.getState().startTransaction({steps:e,onTransactionSuccess:e=>{p.capture(H.Y.PurchaseInvoices.Success),e&&O.P.getState().addTransaction(e)},onTransactionError:()=>{p.capture(H.Y.PurchaseInvoices.Error)},onTransactionComplete:q}),(0,j.M)({steps:e,notify:g.S.getState().updateStep,wagmiConfig:P.G})},onError:e=>{console.error("Failed to build transaction:",e)}}),V=[{label:"Origin",value:(0,i.jsx)(a.$,{intent:"muted",onClick:()=>u("selectOrigin"),children:w?(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)(B.T,{asset:{address:n.contracts[0].contract_address,chainId:n.contracts[0].chain_id,decimals:18},maximumFractionDigits:8,amount:null==r?void 0:r.minAmounts[w]})," on ",(0,i.jsx)(x.s,{chainId:w})]}):(0,i.jsx)("div",{children:"Select Origin & Purchase Amount"})})},{label:"Destinations",value:(0,i.jsx)(a.$,{intent:"muted",type:"button",disabled:!w,onClick:()=>u("selectDestination"),children:(null==I?void 0:I.length)?(0,i.jsx)(v.s,{chainIds:I,visibleCount:6}):(0,i.jsx)("div",{children:"Select Destination"})})}];return"preview"===c?(0,i.jsxs)("div",{className:"p-4",children:[(0,i.jsx)("dl",{className:"flex flex-col space-y-4 pb-4",children:V.map(e=>{let{label:t,value:s}=e;return(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsx)(l.E,{as:"dt",variant:"body-2",className:"text-theme-text-placeholder",children:t}),(0,i.jsx)(l.E,{as:"dd",variant:"body-2",children:s})]},t)})}),(0,i.jsx)(J,{toAddress:F,setToAddress:G,useToAddress:T}),(0,i.jsxs)("div",{className:"flex gap-1 mt-4",children:[(0,i.jsx)(a.$,{className:"flex-1",disabled:!w||!(null==I?void 0:I.length)||Y.isPending||$<=0n||(T?!F:!U),onClick:()=>Y.mutate(),children:Y.isPending?(0,i.jsxs)("div",{className:"flex items-center justify-center gap-1",children:["Building Transaction"," ",(0,i.jsx)(h.a,{fill:"currentColor",className:"h-4 w-4"})]}):"Purchase"}),(0,i.jsx)(a.$,{onClick:()=>L(e=>!e),className:"px-3 py-1",children:(0,i.jsx)(C.rS2,{className:"h-5 w-5"})})]})]}):"selectOrigin"===c?(0,i.jsx)(X,{invoice:s,selectedOrigin:w,minAmounts:r,purchasableInvoices:f,onSave:e=>{N(e),u("preview")}}):"selectDestination"===c?(0,i.jsx)(W,{invoice:s,selectedOrigin:w,custodiedAmounts:m,selectedDestinations:I,onSave:e=>{_(e),u("preview")}}):"confirmation"===c?(0,i.jsx)("div",{className:"p-4",children:(0,i.jsx)(d.O,{summary:(0,i.jsx)("div",{children:(0,i.jsx)(l.E,{className:"flex items-center gap-1",variant:"body-1",children:"Purchasing Invoice"})}),successMessage:"Invoice Purchased",chainId:w})}):void 0}function X(e){let{invoice:t,selectedOrigin:s,purchasableInvoices:n,minAmounts:r,onSave:d}=e,[u,h]=(0,S.useState)(s),m=(0,S.useMemo)(()=>Object.entries((null==r?void 0:r.minAmounts)||{}).toSorted((e,t)=>Number(BigInt(e[1])-BigInt(t[1]))),[r]);return 0===Object.keys((null==r?void 0:r.minAmounts)||{}).length?"Loading...":(0,i.jsxs)("div",{className:"py-4",children:[(0,i.jsxs)("div",{className:"text-theme-text-placeholder flex flex-row items-center justify-between px-4",children:[(0,i.jsx)(l.E,{variant:"body-3",children:"Origin"}),(0,i.jsxs)("div",{className:"flex gap-1",children:[(0,i.jsx)(l.E,{variant:"body-3",children:"Purchase Amount"}),(0,i.jsxs)(c.bL,{children:[(0,i.jsx)(c.l9,{className:"text-theme-text-muted",children:(0,i.jsx)(T.dBD,{fill:"currentColor",className:"h-4 w-4"})}),(0,i.jsx)(c.UC,{className:"w-[260px]",children:(0,i.jsx)(l.E,{variant:"body-3",children:"Some chains have existing liquidity, this is deducted from the total invoice amount."})})]})]})]}),(0,i.jsx)("div",{className:"bg-theme-surface-border my-2 h-[1px] px-4"}),(0,i.jsx)("dl",{className:"space-y-1 overflow-y-scroll max-h-[300px] px-4",children:m.map(e=>{let[s,a]=e,r=(0,o.cd)({tickerHash:t.ticker_hash,chainId:Number(s)}),c=M(n,t,Number(s));return r?(0,i.jsx)(Y,{isDisabled:c,isSelected:u===Number(s),onClick:()=>{var e;return e=Number(s),void(u===e?h(void 0):h(e))},children:(0,i.jsxs)("div",{className:"flex justify-between w-full",children:[(0,i.jsx)(x.s,{imageClassName:"h-6 w-6",chainId:s}),(0,i.jsx)(l.E,{variant:"body-2",children:(0,i.jsxs)("span",{children:[(0,p.xo)((0,A.J)(BigInt(a),18),{maximumFractionDigits:8})," ",r.symbol]})})]})},s):null})}),(0,i.jsx)("div",{className:"px-4 pt-2",children:(0,i.jsx)(a.$,{onClick:()=>d(u),className:"w-full",children:"Save"})})]})}function W(e){let{invoice:t,selectedOrigin:s,custodiedAmounts:n,selectedDestinations:r=[],onSave:d}=e,[u,h]=(0,S.useState)(r),m=(0,S.useMemo)(()=>Object.entries(n||{}).filter(e=>{let[t]=e;return Number(t)!==s}).toSorted((e,t)=>Number(BigInt(t[1])-BigInt(e[1]))),[n,s]);return 0===Object.keys(n||{}).length?"Loading...":(0,i.jsxs)("div",{className:"py-4",children:[(0,i.jsxs)("div",{className:"text-theme-text-placeholder flex flex-row items-center justify-between px-4",children:[(0,i.jsx)(l.E,{variant:"body-3",children:"Destination(s)"}),(0,i.jsxs)("div",{className:"flex gap-1",children:[(0,i.jsx)(l.E,{variant:"body-3",children:"Funds on chain"}),(0,i.jsxs)(c.bL,{children:[(0,i.jsx)(c.l9,{className:"text-theme-text-muted",children:(0,i.jsx)(T.dBD,{fill:"currentColor",className:"h-4 w-4"})}),(0,i.jsx)(c.UC,{className:"w-[260px]",children:(0,i.jsx)(l.E,{variant:"body-3",children:"Choosing a chain with the highest funds will mean you will settle faster."})})]})]})]}),(0,i.jsx)("div",{className:"bg-theme-surface-border my-2 h-[1px] px-4"}),(0,i.jsx)("dl",{className:"space-y-1 overflow-y-scroll max-h-[300px] px-4",children:m.map(e=>{let[s,n]=e,a=(0,o.cd)({tickerHash:t.ticker_hash,chainId:Number(s)});if(!a)return null;let r=u.includes(Number(s));return(0,i.jsx)(Y,{isSelected:r,onClick:()=>{var e;return e=Number(s),void(u.includes(e)?h(u.filter(t=>t!==e)):h([...u,e]))},children:(0,i.jsxs)("div",{className:"flex justify-between w-full",children:[(0,i.jsx)(x.s,{imageClassName:"h-6 w-6",chainId:Number(s)}),(0,i.jsx)(l.E,{variant:"body-2",children:(0,i.jsxs)("span",{children:[(0,p.xo)((0,A.J)(BigInt(n),18),{maximumFractionDigits:8})," ",a.symbol]})})]})},s)})}),(0,i.jsx)("div",{className:"px-4 pt-2",children:(0,i.jsx)(a.$,{onClick:()=>d(u),className:"w-full",children:"Save"})})]})}[o,d,x,v,f,b,R,B,L]=G.then?(await G)():G;let Y=e=>{let{isSelected:t,isDisabled:s,onClick:n,children:a}=e;return(0,i.jsx)("button",{type:"button",disabled:s,className:(0,m.cn)("hover:bg-theme-surface-input flex w-full flex-row items-center justify-between rounded-lg border border-transparent p-2",t&&"bg-theme-surface-input border-theme-button-primary",s&&"cursor-not-allowed opacity-50"),onClick:n,children:a})};function J(e){let{setToAddress:t,useToAddress:s,toAddress:n}=e;return(0,i.jsx)(w.F,{features:N.l,children:(0,i.jsx)(I.N,{initial:!1,children:s?(0,i.jsx)(_.m.div,{transition:{duration:.175,ease:"easeOut"},variants:V,initial:"initial",animate:"animate",exit:"exit",children:(0,i.jsxs)(u.a,{className:"space-y-2 rounded-xl border-none",intent:"input",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)(l.E,{className:"text-theme-text-placeholder",variant:"body-3",children:"Receiving address"}),(0,i.jsx)($,{})]}),(0,i.jsx)("input",{className:"bg-theme-surface-input w-full p-0 outline-none ".concat((0,l.U)({variant:"body-2"})),onChange:e=>t(e.target.value),placeholder:"Enter wallet address",value:n})]})},"to-address"):null})})}let V={exit:{opacity:0,height:0,marginBottom:0,scale:.8},animate:{opacity:1,height:"auto",marginBottom:8,scale:1},initial:{opacity:0,height:0,marginBottom:0,scale:.8}};function $(){return(0,i.jsxs)(c.bL,{children:[(0,i.jsx)(c.l9,{className:"text-theme-text-muted",children:(0,i.jsx)(T.dBD,{fill:"currentColor",className:"h-4 w-4"})}),(0,i.jsx)(c.UC,{className:"w-fit p-4",children:(0,i.jsxs)(l.E,{className:"text-theme-text-muted",variant:"body-3",children:["Please make sure the receiving address is correct, owned by ",(0,i.jsx)("br",{})," and accessible to you on"," ",(0,i.jsx)("span",{className:"font-bold",children:"all the destinations chains"})," for selected invoices."]})})]})}n()}catch(e){n(e)}})},22625:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/invoices",function(){return s(15980)}])},27286:(e,t,s)=>{"use strict";s.d(t,{q7:()=>C,bL:()=>S});var n=s(53239),i=s(45361),a=s(66426),r=s(13006),c=s(29097),l=s(9208),o=s(80263),d=n.forwardRef((e,t)=>{let{pressed:s,defaultPressed:n=!1,onPressedChange:i,...r}=e,[d=!1,u]=(0,l.i)({prop:s,onChange:i,defaultProp:n});return(0,o.jsx)(a.sG.button,{type:"button","aria-pressed":d,"data-state":d?"on":"off","data-disabled":e.disabled?"":void 0,...r,ref:t,onClick:(0,c.m)(e.onClick,()=>{e.disabled||u(!d)})})});d.displayName="Toggle";var u=s(15198),h="ToggleGroup",[m,x]=(0,i.A)(h,[r.RG]),v=(0,r.RG)(),f=n.forwardRef((e,t)=>{let{type:s,...n}=e;if("single"===s)return(0,o.jsx)(g,{...n,ref:t});if("multiple"===s)return(0,o.jsx)(b,{...n,ref:t});throw Error(`Missing prop \`type\` expected on \`${h}\``)});f.displayName=h;var[p,j]=m(h),g=n.forwardRef((e,t)=>{let{value:s,defaultValue:i,onValueChange:a=()=>{},...r}=e,[c,d]=(0,l.i)({prop:s,defaultProp:i,onChange:a});return(0,o.jsx)(p,{scope:e.__scopeToggleGroup,type:"single",value:c?[c]:[],onItemActivate:d,onItemDeactivate:n.useCallback(()=>d(""),[d]),children:(0,o.jsx)(N,{...r,ref:t})})}),b=n.forwardRef((e,t)=>{let{value:s,defaultValue:i,onValueChange:a=()=>{},...r}=e,[c=[],d]=(0,l.i)({prop:s,defaultProp:i,onChange:a}),u=n.useCallback(e=>d((t=[])=>[...t,e]),[d]),h=n.useCallback(e=>d((t=[])=>t.filter(t=>t!==e)),[d]);return(0,o.jsx)(p,{scope:e.__scopeToggleGroup,type:"multiple",value:c,onItemActivate:u,onItemDeactivate:h,children:(0,o.jsx)(N,{...r,ref:t})})});f.displayName=h;var[y,w]=m(h),N=n.forwardRef((e,t)=>{let{__scopeToggleGroup:s,disabled:n=!1,rovingFocus:i=!0,orientation:c,dir:l,loop:d=!0,...h}=e,m=v(s),x=(0,u.jH)(l),f={role:"group",dir:x,...h};return(0,o.jsx)(y,{scope:s,rovingFocus:i,disabled:n,children:i?(0,o.jsx)(r.bL,{asChild:!0,...m,orientation:c,dir:x,loop:d,children:(0,o.jsx)(a.sG.div,{...f,ref:t})}):(0,o.jsx)(a.sG.div,{...f,ref:t})})}),I="ToggleGroupItem",_=n.forwardRef((e,t)=>{let s=j(I,e.__scopeToggleGroup),i=w(I,e.__scopeToggleGroup),a=v(e.__scopeToggleGroup),c=s.value.includes(e.value),l=i.disabled||e.disabled,d={...e,pressed:c,disabled:l},u=n.useRef(null);return i.rovingFocus?(0,o.jsx)(r.q7,{asChild:!0,...a,focusable:!l,active:c,ref:u,children:(0,o.jsx)(k,{...d,ref:t})}):(0,o.jsx)(k,{...d,ref:t})});_.displayName=I;var k=n.forwardRef((e,t)=>{let{__scopeToggleGroup:s,value:n,...i}=e,a=j(I,s),r={role:"radio","aria-checked":e.pressed,"aria-pressed":void 0},c="single"===a.type?r:void 0;return(0,o.jsx)(d,{...c,...i,ref:t,onPressedChange:e=>{e?a.onItemActivate(n):a.onItemDeactivate(n)}})}),S=f,C=_},35460:(e,t,s)=>{"use strict";s.a(e,async(e,n)=>{try{s.d(t,{F:()=>f});var i=s(11895),a=s(85335),r=s(44344),c=s(34893),l=s(55700),o=s(18034),d=s(75261),u=s(83288),h=s(9188),m=s(34502),x=s(5657),v=e([i,r,h]);async function f(e){let t=[],{address:s,chainId:n}=(0,d.s)(x.G);if(!n)throw Error("No chainId");if(!s)throw Error("No address");if(e.asset.contract.isNative){var c;let n=(0,i.cd)({chainId:e.origin,symbol:"WETH"});if(!n)throw Error("WETH contract not found");if((null!==(c=await (0,u.J)(x.G,{abi:l.W,address:n.contract.contract_address,functionName:"balanceOf",args:[s],chainId:e.origin}))&&void 0!==c?c:0n)<e.amount){let i=(0,r.S9)({address:s,chainId:e.origin,to:n.contract.contract_address,callData:(0,m.p)({abi:l.W,functionName:"deposit"}),value:e.amount,title:"Wrap ETH to WETH"});t.push(i)}e.asset=n}let{data:o,error:h}=await (0,a.CR)({body:function(e){let{asset:t,callData:s,toAddress:n,destinations:i,amount:a,origin:r}=e;return{destinations:i.map(e=>e.toString()),inputAsset:t.contract.contract_address,callData:s,origin:r.toString(),amount:a.toString(),maxFee:"0",to:n}}(e)});if(!o)throw h;let v=await (0,r.Xt)({fromChain:n,toChain:o.chainId});v&&t.unshift(v);let f=await (0,r.sQ)({asset:e.asset,amount:e.amount,chainId:o.chainId,ownerAddress:s,spenderAddress:o.to,wagmiConfig:x.G});f&&t.push(...f),e.asset.isXERC20&&await Promise.all(e.destinations.map(t=>j(t,e.asset.tickerHash,e.amount)));let g=await p(e,o,s);return t.push(g),t}async function p(e,t,s){return{type:"send-transaction",id:(0,c.N)(),data:{account:s,data:t.data,to:t.to,chainId:t.chainId,value:t.value?BigInt(t.value):0n},meta:{type:"new-intent",status:"idle",data:{amount:e.amount,asset:e.asset,origin:e.origin,destinations:e.destinations,txHash:void 0}}}}async function j(e,t,s){var n;let a=(0,h.r_)({chainId:e}),r=null==a?void 0:null===(n=a.deployments)||void 0===n?void 0:n.XERC20Module;if(!r)throw Error("XERC20 module not found for ".concat(e));let c=(0,i.cd)({chainId:e,tickerHash:t});if(!c)throw Error("Asset not found for ".concat(e));let l=await (0,u.J)(x.G,{abi:o.n,address:c.contract.contract_address,functionName:"burningCurrentLimitOf",args:[r],chainId:e});if(l<s)throw Error("Input amount exceeds burning limit \n domain: ".concat(e," \n burningCurrentLimitOf: ").concat(l," \n amount: ").concat(s));return l}[i,r,h]=v.then?(await v)():v,n()}catch(e){n(e)}})},39006:(e,t,s)=>{"use strict";s.d(t,{B:()=>r});var n=s(85335),i=s(28520),a=s(69355);function r(e){return(0,i.I)({queryKey:["useMinPurchaseAmount","persist",e],queryFn:()=>c(e),placeholderData:a.rX,refetchInterval:2e4})}async function c(e){let{data:t,error:s}=await (0,n.We)({path:{intentId:e}});if(s)throw s;return t}},41436:e=>{e.exports=function(e){return function(t,s,n){for(var i=-1,a=Object(t),r=n(t),c=r.length;c--;){var l=r[e?c:++i];if(!1===s(a[l],l,a))break}return t}}},44217:(e,t,s)=>{var n=s(50117),i=s(77936),a=s(85892);e.exports=function(e,t){var s={};return t=a(t,3),i(e,function(e,i,a){n(s,i,t(e,i,a))}),s}},45228:(e,t,s)=>{var n=s(96546),i=s(85892),a=s(95557);e.exports=function(e,t){return e&&e.length?n(e,i(t,2),a):void 0}},51096:(e,t,s)=>{e.exports=s(41436)()},55648:(e,t,s)=>{"use strict";s.a(e,async(e,n)=>{try{s.d(t,{G:()=>c});var i=s(52095),a=s(11895),r=e([a]);function c(e){let{amount:t,chainId:s,contractAddress:n,getPrice:r,decimals:c}=e,l=(0,a.cd)({contractAddress:n,chainId:Number(s)});if(!l)throw Error("asset not found\n\n".concat(JSON.stringify({chainId:s,contractAddress:n})));let o=r(l.id);if(!o)throw Error("asset price not found\n\n".concat(JSON.stringify({chainId:s,contractAddress:n,asset:l.id})));return o*Number((0,i.J)(BigInt(t),null!=c?c:l.contract.decimals))}a=(r.then?(await r)():r)[0],n()}catch(e){n(e)}})},57180:(e,t,s)=>{"use strict";s.d(t,{p:()=>n});let n=[{inputs:[{name:"_tickerHash",type:"bytes32"},{name:"_domain",type:"uint32"}],name:"assetHash",outputs:[{name:"_assetHash",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{name:"_assetHash",type:"bytes32"}],name:"custodiedAssets",outputs:[{name:"_amount",type:"uint256"}],stateMutability:"view",type:"function"}]},67290:(e,t,s)=>{"use strict";s.a(e,async(e,n)=>{try{s.d(t,{t:()=>E});var i=s(80263),a=s(44217),r=s.n(a),c=s(45228),l=s.n(c),o=s(10039),d=s(53820),u=s.n(d),h=s(53239),m=s(93567),x=s(73460),v=s(97187),f=s(32183),p=s(82815),j=s(11895),g=s(55648),b=s(93842),y=s(54041),w=s(26976),N=s(86796),I=s(64245),_=s(71418),k=s(7634),S=s(67902),C=s(18043),T=e([f,p,j,g,w,I,k,S,C]);function E(e){var t;let s,n,{setIsFetching:a}=e,[c,o,d,u]=(0,S.R)((0,m.k)(e=>[e.destination,e.origins,e.tickerHash,e.sortOrderByDiscount])),f=!!c||!!(null==o?void 0:o.length)||!!d||!!u,{currentCursor:p,isNextDisabled:j,isPrevDisabled:g,nextPage:b,prevPage:y}=(0,N.O)({defaultCursor:""}),{data:w,isLoading:I,isFetching:C}=(0,_.W)({limit:25,cursor:p,destinations:c?[c]:void 0,origins:o,sortOrderByDiscount:u,tickerHash:d},{initialData:void 0,refetchInterval:6e4});(0,h.useEffect)(()=>{a(C)},[C,a]);let T=!!(null==w?void 0:null===(t=w.invoices)||void 0===t?void 0:t.length);s=T?{isNextDisabled:j(null==w?void 0:w.nextCursor),isPrevDisabled:g(),nextPage:()=>{b(null==w?void 0:w.nextCursor),setTimeout(()=>window.scrollTo({top:0,behavior:"smooth"}),50)},prevPage:()=>{y(),setTimeout(()=>window.scrollTo({top:0,behavior:"smooth"}),50)}}:void 0,n=I?"loading":T?null:f?(0,i.jsxs)("div",{className:"text-center",children:["Sorry, there's no available Invoices with your current filter selection. ",(0,i.jsx)("br",{})," Please try a different one."]}):(0,i.jsxs)("div",{className:"text-center",children:["No available Invoices at the moment. ",(0,i.jsx)("br",{})," Please check back later."]});let E=(0,h.useMemo)(()=>{if(!(null==w?void 0:w.invoices))return{};let e=w.invoices.flatMap(e=>e.destinations.map(t=>({purchasableInvoiceId:e.intent_id,timeStamp:Number(e.hub_invoice_enqueued_timestamp),key:"".concat(e.ticker_hash,"-").concat(t)}))),t=Object.groupBy(e,e=>e.key);return r()(t,e=>l()(e,"timeStamp"))},[null==w?void 0:w.invoices]);return(0,i.jsx)("div",{children:(0,i.jsx)("div",{className:"flex",children:(0,i.jsxs)("div",{className:(0,v.cn)("flex flex-1 flex-col gap-2"),children:[(0,i.jsx)(k.C,{}),(0,i.jsx)("div",{children:(0,i.jsxs)(x.bL,{pagination:s,message:n,children:[(0,i.jsxs)(x.p3,{children:[(0,i.jsx)(x.Th,{className:"w-8"}),(0,i.jsx)(x.Th,{children:"Intent ID"}),(0,i.jsx)(x.Th,{children:"Origin"}),(0,i.jsx)(x.Th,{children:"Destination"}),(0,i.jsx)(x.Th,{children:"Amount"}),(0,i.jsx)(x.Th,{className:"text-right",children:"Discount"}),(0,i.jsx)(x.Th,{className:"text-right",children:"Time Created"})]}),(0,i.jsx)(x.nB,{children:null==w?void 0:w.invoices.map(e=>(0,i.jsx)(A,{invoice:e,purchasableInvoices:E},e.intent_id))})]})})]})})})}function A(e){let{invoice:t,purchasableInvoices:s}=e,n=(0,j.Iu)({tickerHash:t.ticker_hash}),{getPrice:a}=(0,w.Y)(),r=o.c9.now().diff(o.c9.fromSeconds(Number(t.hub_invoice_enqueued_timestamp))).as("hours")>24;if(!n)return console.error("asset not found, ticker_hash:",t.ticker_hash),null;let c=(a?(0,g.G)({amount:t.amount,contractAddress:n.contracts[0].contract_address,chainId:n.contracts[0].chain_id,getPrice:a,decimals:18}):0)*Number(t.discountBps)/1e4;return(0,i.jsxs)(x.Tr,{children:[(0,i.jsx)(x.Td,{className:"w-8",children:(0,i.jsx)(C.H,{invoice:t,purchasableInvoices:s})}),(0,i.jsx)(x.Td,{children:(0,i.jsx)(u(),{className:"hover:text-theme-text-placeholder underline decoration-dashed underline-offset-4 transition-colors duration-300",href:"/intents/".concat(t.intent_id),children:(0,y.x)(t.intent_id,6,6)})}),(0,i.jsx)(x.Td,{children:(0,i.jsx)(f.s,{chainId:t.origin})}),(0,i.jsx)(x.Td,{children:(0,i.jsx)(p.s,{chainIds:t.destinations,visibleCount:3})}),(0,i.jsx)(x.Td,{children:(0,i.jsx)(I.T,{asset:{address:n.contracts[0].contract_address,chainId:n.contracts[0].chain_id,decimals:18},amount:t.amount})}),(0,i.jsx)(x.Td,{className:"text-right",children:(0,i.jsxs)("div",{className:"text-theme-text-success flex flex-col",children:[(0,i.jsx)("span",{children:(0,b.Z0)((t.discountBps||0)/1e4,{maximumFractionDigits:6})}),(0,i.jsx)("span",{children:(0,b.gk)(c)})]})}),(0,i.jsx)(x.Td,{className:"text-right",children:r?o.c9.fromSeconds(Number(t.hub_invoice_enqueued_timestamp)).toLocaleString(o.c9.DATETIME_MED):o.c9.fromSeconds(Number(t.hub_invoice_enqueued_timestamp)).toRelative()})]})}[f,p,j,g,w,I,k,S,C]=T.then?(await T)():T,n()}catch(e){n(e)}})},67902:(e,t,s)=>{"use strict";s.a(e,async(e,n)=>{try{s.d(t,{R:()=>x});var i=s(11895),a=s(97344),r=s.n(a),c=s(31043),l=s.n(c),o=s(68501),d=s.n(o),u=s(69281),h=e([i]);i=(h.then?(await h)():h)[0];let m={sortOrderByDiscount:void 0,destination:void 0,origins:void 0,tickerHash:void 0},x=(0,u.v)((e,t)=>{let s=!1;return{...m,reset:()=>{e(m),setTimeout(()=>t().syncToURL(),20)},syncFromURL:t=>{if(s)return;let{sortOrderByDiscount:n,destination:a,tokenId:r,origins:c}=t||{},l=r?(0,i.Iu)({id:r}):void 0;e({sortOrderByDiscount:n,destination:a,tickerHash:null==l?void 0:l.tickerHash,origins:null==c?void 0:c.split(" ")})},syncToURL:()=>{let{sortOrderByDiscount:e,destination:n,origins:a,tickerHash:c}=t(),o=c?(0,i.Iu)({tickerHash:c}):void 0,u={sortOrderByDiscount:e||"",destination:n||"",tokenId:(null==o?void 0:o.id)||"",origins:(null==a?void 0:a.join(" "))||""},h=l()(u,r());s=!0,d().push(d().asPath,{search:new URLSearchParams(h).toString()},{shallow:!0})}}});n()}catch(e){n(e)}})},77936:(e,t,s)=>{var n=s(51096),i=s(24967);e.exports=function(e,t){return e&&n(e,t,i)}},80797:(e,t,s)=>{"use strict";s.a(e,async(e,n)=>{try{s.d(t,{W:()=>u});var i=s(80263),a=s(93567),r=s(78473),c=s(99392),l=s(11895),o=s(67902),d=e([c,l,o]);[c,l,o]=d.then?(await d)():d;let h=l.sP.map(e=>({value:e.tickerHash,label:(0,i.jsx)(c.V,{tickerHash:e.tickerHash,assetId:void 0})}));function u(){let e=(0,o.R)((0,a.k)(e=>e.tickerHash));return(0,i.jsx)(r.t,{trigger:(0,i.jsxs)("div",{className:"flex items-center gap-1",children:["Token:",e?(0,i.jsx)(c.V,{tickerHash:e,assetId:void 0}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("img",{src:"/logos/chains/All.avif",className:"h-5 w-5",alt:"all"}),"All"]})]}),onSelect:e=>{o.R.setState({tickerHash:e}),o.R.getState().syncToURL()},label:"You can select only one token",selectedItem:e,multiSelect:!1,items:h})}n()}catch(e){n(e)}})},89806:(e,t,s)=>{"use strict";s.a(e,async(e,n)=>{try{s.d(t,{D:()=>m,n:()=>h});var i=s(80263),a=s(93567),r=s(78473),c=s(32183),l=s(82815),o=s(9188),d=s(67902),u=e([c,l,o,d]);[c,l,o,d]=u.then?(await u)():u;let x=o.P_.map(e=>({label:(0,i.jsx)(c.s,{chainId:e.chain_id}),value:String(e.chain_id)}));function h(){let e=(0,d.R)((0,a.k)(e=>e.origins));return(0,i.jsx)(r.t,{trigger:(0,i.jsxs)("div",{className:"flex gap-1",children:["Origin:",e&&e.length?(0,i.jsx)(l.s,{chainIds:e,visibleCount:4}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("img",{src:"/logos/chains/All.avif",className:"h-5 w-5",alt:"all"}),"All"]})]}),onSelect:e=>{d.R.setState({origins:"all"===e?void 0:e}),d.R.getState().syncToURL()},label:"You can select more than one chain",selectedItems:e||"all",items:x,multiSelect:!0})}function m(){let e=(0,d.R)((0,a.k)(e=>e.destination));return(0,i.jsx)(r.t,{trigger:(0,i.jsxs)("div",{className:"flex items-center gap-1",children:["Destination:",e?(0,i.jsx)(c.s,{chainId:Number(e)}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("img",{src:"/logos/chains/All.avif",className:"h-5 w-5",alt:"all"}),"All"]})]}),onSelect:e=>{d.R.setState({destination:e||void 0}),d.R.getState().syncToURL()},label:"You can select only one chain",selectedItem:e,multiSelect:!1,items:x})}n()}catch(e){n(e)}})},95557:e=>{e.exports=function(e,t){return e<t}},96546:(e,t,s)=>{var n=s(89723);e.exports=function(e,t,s){for(var i=-1,a=e.length;++i<a;){var r=e[i],c=t(r);if(null!=c&&(void 0===l?c==c&&!n(c):s(c,l)))var l=c,o=r}return o}},97116:(e,t,s)=>{"use strict";s.a(e,async(e,n)=>{try{s.d(t,{P:()=>h});var i=s(11895),a=s(9188),r=s(57180),c=s(28520),l=s(69355),o=s(83288),d=s(5657),u=e([i,a]);function h(e,t){var s,n;return(0,c.I)({queryKey:(s=e,n=t,["useCustodiedAmount","persist",s,n]),queryFn:()=>m(e,t),placeholderData:l.rX,refetchInterval:2e4})}async function m(e,t){let s=t.map(t=>{var s;let n=null===(s=(0,i.cd)({chainId:t,tickerHash:e}))||void 0===s?void 0:s.contract.hub_asset_hash;if(!n)throw Error("No hub asset hash found for ".concat(e," on domain ").concat(t));return(0,o.J)(d.G,{address:function(){var e;let t=null===(e=a.Xf.deployments)||void 0===e?void 0:e.everclear;if(!t)throw Error("No contract address found");return t}(),abi:r.p,functionName:"custodiedAssets",chainId:a.Xf.chain_id,args:[n]})}),n=await Promise.all(s);return Object.fromEntries(t.map((e,t)=>[e,String(n[t])]))}[i,a]=u.then?(await u)():u,n()}catch(e){n(e)}})},99392:(e,t,s)=>{"use strict";s.a(e,async(e,n)=>{try{s.d(t,{V:()=>o});var i=s(80263),a=s(1469),r=s(97187),c=s(11895),l=e([c]);function o(e){let{assetId:t,tickerHash:s,showName:n=!0,imageClassName:l,textVariant:o="body-2"}=e,d=(0,c.Iu)({id:t,tickerHash:s});return d?(0,i.jsxs)("div",{className:"flex items-center gap-1 rounded-full",children:[(0,i.jsx)("img",{className:(0,r.cn)("border-theme-surface-border bg-theme-surface-page h-5 w-5 rounded-full border",l),src:d.image,alt:d.name}),n&&(0,i.jsx)(a.E,{variant:o,children:d.symbol})]}):"-"}c=(l.then?(await l)():l)[0],n()}catch(e){n(e)}})}},e=>{var t=t=>e(e.s=t);e.O(0,[978,456,803,878,725,483,962,230,310,474,636,593,792],()=>t(22625)),_N_E=e.O()}]);